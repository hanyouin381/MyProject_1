(this["webpackJsonp@zmedia/zmp3-desktop"]=this["webpackJsonp@zmedia/zmp3-desktop"]||[]).push([[31],{1585:function(t,e){if(!n)var n={map:function(t,e){var n={};return e?t.map((function(t,r){return n.index=r,e.call(n,t)})):t.slice()},naturalOrder:function(t,e){return t<e?-1:t>e?1:0},sum:function(t,e){var n={};return t.reduce(e?function(t,r,o){return n.index=o,t+e.call(n,r)}:function(t,e){return t+e},0)},max:function(t,e){return Math.max.apply(null,e?n.map(t,e):t)}};var r=function(){function t(t,e,n){return(t<<10)+(e<<5)+n}function e(t){var e=[],n=!1;function r(){e.sort(t),n=!0}return{push:function(t){e.push(t),n=!1},peek:function(t){return n||r(),void 0===t&&(t=e.length-1),e[t]},pop:function(){return n||r(),e.pop()},size:function(){return e.length},map:function(t){return e.map(t)},debug:function(){return n||r(),e}}}function r(t,e,n,r,o,i,u){this.r1=t,this.r2=e,this.g1=n,this.g2=r,this.b1=o,this.b2=i,this.histo=u}function o(){this.vboxes=new e((function(t,e){return n.naturalOrder(t.vbox.count()*t.vbox.volume(),e.vbox.count()*e.vbox.volume())}))}function i(e,r){if(r.count()){var o=r.r2-r.r1+1,i=r.g2-r.g1+1,u=r.b2-r.b1+1,a=n.max([o,i,u]);if(1==r.count())return[r.copy()];var c,l,s,f,d=0,h=[],m=[];if(a==o)for(c=r.r1;c<=r.r2;c++){for(f=0,l=r.g1;l<=r.g2;l++)for(s=r.b1;s<=r.b2;s++)f+=e[t(c,l,s)]||0;d+=f,h[c]=d}else if(a==i)for(c=r.g1;c<=r.g2;c++){for(f=0,l=r.r1;l<=r.r2;l++)for(s=r.b1;s<=r.b2;s++)f+=e[t(l,c,s)]||0;d+=f,h[c]=d}else for(c=r.b1;c<=r.b2;c++){for(f=0,l=r.r1;l<=r.r2;l++)for(s=r.g1;s<=r.g2;s++)f+=e[t(l,s,c)]||0;d+=f,h[c]=d}return h.forEach((function(t,e){m[e]=d-t})),v(a==o?"r":a==i?"g":"b")}function v(t){var e,n,o,i,u,a=t+"1",l=t+"2",s=0;for(c=r[a];c<=r[l];c++)if(h[c]>d/2){for(o=r.copy(),i=r.copy(),u=(e=c-r[a])<=(n=r[l]-c)?Math.min(r[l]-1,~~(c+n/2)):Math.max(r[a],~~(c-1-e/2));!h[u];)u++;for(s=m[u];!s&&h[u-1];)s=m[--u];return o[l]=u,i[a]=o[l]+1,[o,i]}}}return r.prototype={volume:function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},count:function(e){var n=this.histo;if(!this._count_set||e){var r,o,i,u=0;for(r=this.r1;r<=this.r2;r++)for(o=this.g1;o<=this.g2;o++)for(i=this.b1;i<=this.b2;i++)u+=n[t(r,o,i)]||0;this._count=u,this._count_set=!0}return this._count},copy:function(){return new r(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},avg:function(e){var n=this.histo;if(!this._avg||e){var r,o,i,u,a=0,c=0,l=0,s=0;for(o=this.r1;o<=this.r2;o++)for(i=this.g1;i<=this.g2;i++)for(u=this.b1;u<=this.b2;u++)a+=r=n[t(o,i,u)]||0,c+=r*(o+.5)*8,l+=r*(i+.5)*8,s+=r*(u+.5)*8;this._avg=a?[~~(c/a),~~(l/a),~~(s/a)]:[~~(8*(this.r1+this.r2+1)/2),~~(8*(this.g1+this.g2+1)/2),~~(8*(this.b1+this.b2+1)/2)]}return this._avg},contains:function(t){var e=t[0]>>3;return gval=t[1]>>3,bval=t[2]>>3,e>=this.r1&&e<=this.r2&&gval>=this.g1&&gval<=this.g2&&bval>=this.b1&&bval<=this.b2}},o.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map((function(t){return t.color}))},size:function(){return this.vboxes.size()},map:function(t){for(var e=this.vboxes,n=0;n<e.size();n++)if(e.peek(n).vbox.contains(t))return e.peek(n).color;return this.nearest(t)},nearest:function(t){for(var e,n,r,o=this.vboxes,i=0;i<o.size();i++)((n=Math.sqrt(Math.pow(t[0]-o.peek(i).color[0],2)+Math.pow(t[1]-o.peek(i).color[1],2)+Math.pow(t[2]-o.peek(i).color[2],2)))<e||void 0===e)&&(e=n,r=o.peek(i).color);return r},forcebw:function(){var t=this.vboxes;t.sort((function(t,e){return n.naturalOrder(n.sum(t.color),n.sum(e.color))}));var e=t[0].color;e[0]<5&&e[1]<5&&e[2]<5&&(t[0].color=[0,0,0]);var r=t.length-1,o=t[r].color;o[0]>251&&o[1]>251&&o[2]>251&&(t[r].color=[255,255,255])}},{quantize:function(u,a){if(!u.length||a<2||a>256)return!1;var c=function(e){var n,r,o,i,u=new Array(32768);return e.forEach((function(e){r=e[0]>>3,o=e[1]>>3,i=e[2]>>3,n=t(r,o,i),u[n]=(u[n]||0)+1})),u}(u);c.forEach((function(){0}));var l=function(t,e){var n,o,i,u=1e6,a=0,c=1e6,l=0,s=1e6,f=0;return t.forEach((function(t){n=t[0]>>3,o=t[1]>>3,i=t[2]>>3,n<u?u=n:n>a&&(a=n),o<c?c=o:o>l&&(l=o),i<s?s=i:i>f&&(f=i)})),new r(u,a,c,l,s,f,e)}(u,c),s=new e((function(t,e){return n.naturalOrder(t.count(),e.count())}));function f(t,e){for(var n,r=1,o=0;o<1e3;)if((n=t.pop()).count()){var u=i(c,n),a=u[0],l=u[1];if(!a)return;if(t.push(a),l&&(t.push(l),r++),r>=e)return;if(o++>1e3)return}else t.push(n),o++}s.push(l),f(s,.75*a);for(var d=new e((function(t,e){return n.naturalOrder(t.count()*t.volume(),e.count()*e.volume())}));s.size();)d.push(s.pop());f(d,a-d.size());for(var h=new o;d.size();)h.push(d.pop());return h}}}();t.exports=r.quantize},1603:function(t,e,n){"use strict";function r(t){if(null==t)throw new TypeError("Cannot destructure undefined")}n.d(e,"a",(function(){return r}))},1621:function(t,e,n){!function(t){"use strict";function e(t,e,n,r){var o,i=!1,u=0;function a(){o&&clearTimeout(o)}function c(){for(var c=arguments.length,l=new Array(c),s=0;s<c;s++)l[s]=arguments[s];var f=this,d=Date.now()-u;function h(){u=Date.now(),n.apply(f,l)}function m(){o=void 0}i||(r&&!o&&h(),a(),void 0===r&&d>t?h():!0!==e&&(o=setTimeout(r?m:h,void 0===r?t-d:t)))}return"boolean"!==typeof e&&(r=n,n=e,e=void 0),c.cancel=function(){a(),i=!0},c}t.debounce=function(t,n,r){return void 0===r?e(t,n,!1):e(t,r,!1!==n)},t.throttle=e,Object.defineProperty(t,"__esModule",{value:!0})}(e)},1642:function(t,e,n){"use strict";var r=n(0),o=n(109),i=["mousedown","touchstart"];e.a=function(t,e,n){void 0===n&&(n=i);var u=Object(r.useRef)(e);Object(r.useEffect)((function(){u.current=e}),[e]),Object(r.useEffect)((function(){for(var e=function(e){var n=t.current;n&&!n.contains(e.target)&&u.current(e)},r=0,i=n;r<i.length;r++){var a=i[r];Object(o.c)(document,a,e)}return function(){for(var t=0,r=n;t<r.length;t++){var i=r[t];Object(o.b)(document,i,e)}}}),[n,t])}},1680:function(t,e,n){"use strict";var r=n(0),o=n(1621),i=n(109),u=["mousemove","mousedown","resize","keydown","touchstart","wheel"];e.a=function(t,e,n){void 0===t&&(t=6e4),void 0===e&&(e=!1),void 0===n&&(n=u);var a=Object(r.useState)(e),c=a[0],l=a[1];return Object(r.useEffect)((function(){for(var e,r=!0,u=c,a=function(t){r&&(u=t,l(t))},s=Object(o.throttle)(50,(function(){u&&a(!1),clearTimeout(e),e=setTimeout((function(){return a(!0)}),t)})),f=function(){document.hidden||s()},d=0;d<n.length;d++)Object(i.c)(window,n[d],s);return Object(i.c)(document,"visibilitychange",f),e=setTimeout((function(){return a(!0)}),t),function(){r=!1;for(var t=0;t<n.length;t++)Object(i.b)(window,n[t],s);Object(i.b)(document,"visibilitychange",f)}}),[t,n]),c}},1799:function(t,e,n){"use strict";var r=n(0);function o(t,e){return function(n){return t(e(n))}}function i(t,e){return e(t)}function u(t,e){return function(n){return t(e,n)}}function a(t,e){return function(){return t(e)}}function c(t){return function(e){return e[t]}}function l(t,e){return e(t),t}function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}function f(t){t()}function d(t){return function(){return t}}function h(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){e.map(f)}}function m(){}function v(t,e){return t(1,e)}function p(t,e){t(0,e)}function g(t){t(2)}function b(t){return t(4)}function I(t,e){return v(t,u(e,0))}function C(t,e){var n=t(1,(function(t){n(),e(t)}));return n}function w(){var t=[];return function(e,n){switch(e){case 2:return void t.splice(0,t.length);case 1:return t.push(n),function(){var e=t.indexOf(n);e>-1&&t.splice(e,1)};case 0:return void t.slice().forEach((function(t){t(n)}));default:throw new Error("unrecognized action "+e)}}}function x(t){var e=t,n=w();return function(t,r){switch(t){case 1:r(e);break;case 0:e=r;break;case 4:return e}return n(t,r)}}function S(t){return l(w(),(function(e){return I(t,e)}))}function T(t,e){return l(x(e),(function(e){return I(t,e)}))}function y(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduceRight(i,t)}}function O(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=y.apply(void 0,n);return function(e,n){switch(e){case 1:return v(t,o(n));case 2:return void g(t);default:throw new Error("unrecognized action "+e)}}}function E(t,e){return t===e}function k(t){var e;return void 0===t&&(t=E),function(n){return function(r){t(e,r)||(e=r,n(r))}}}function R(t){return function(e){return function(n){t(n)&&e(n)}}}function z(t){return function(e){return o(e,t)}}function j(t){return function(e){return function(){return e(t)}}}function H(t,e){return function(n){return function(r){return n(e=t(e,r))}}}function B(t){return function(e){return function(n){t>0?t--:e(n)}}}function L(t){var e,n;return function(r){return function(o){e=o,n||(n=setTimeout((function(){n=void 0,r(e)}),t))}}}function M(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=new Array(e.length),o=0,i=null,u=Math.pow(2,e.length)-1;return e.forEach((function(t,e){var n=Math.pow(2,e);v(t,(function(t){var a=o;o|=n,r[e]=t,a!==u&&o===u&&i&&(i(),i=null)}))})),function(t){return function(e){var n=function(){return t([e].concat(r))};o===u?n():i=n}}}function A(t,e){return void 0===e&&(e=E),O(t,k(e))}function P(){for(var t=w(),e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=new Array(n.length),i=0,u=Math.pow(2,n.length)-1;return n.forEach((function(e,n){var r=Math.pow(2,n);v(e,(function(e){o[n]=e,(i|=r)===u&&p(t,o)}))})),function(e,n){switch(e){case 1:return i===u&&n(o),v(t,n);case 2:return g(t);default:throw new Error("unrecognized action "+e)}}}function _(t,e,n){void 0===e&&(e=[]);var r=(void 0===n?{singleton:!0}:n).singleton;return{id:F(),constructor:t,dependencies:e,singleton:r}}var F=function(){return Symbol()};function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function N(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"===typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(t,e):void 0}}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var G=["children"];var V="undefined"!==typeof document?r.useLayoutEffect:r.useEffect;function D(t,e,n){var o=Object.keys(e.required||{}),i=Object.keys(e.optional||{}),c=Object.keys(e.methods||{}),s=Object.keys(e.events||{}),f=Object(r.createContext)({});function h(t,n){t.propsReady&&p(t.propsReady,!1);for(var r,u=N(o);!(r=u()).done;){var a=r.value;p(t[e.required[a]],n[a])}for(var c,l=N(i);!(c=l()).done;){var s=c.value;if(s in n)p(t[e.optional[s]],n[s])}t.propsReady&&p(t.propsReady,!0)}function I(t){return s.reduce((function(n,r){return n[r]=function(t){var e,n,r=function(){return e&&e()};return function(o,i){switch(o){case 1:if(i){if(n===i)return;return r(),n=i,e=v(t,i)}return r(),m;case 2:return r(),void(n=null);default:throw new Error("unrecognized action "+o)}}}(t[e.events[r]]),n}),{})}return{Component:Object(r.forwardRef)((function(u,m){var b=u.children,C=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(u,G),w=Object(r.useState)((function(){return l(function(t){var e=new Map;return function t(n){var r=n.id,o=n.constructor,i=n.dependencies,u=n.singleton;if(u&&e.has(r))return e.get(r);var a=o(i.map((function(e){return t(e)})));return u&&e.set(r,a),a}(t)}(t),(function(t){return h(t,C)}))}))[0],x=Object(r.useState)(a(I,w))[0];return V((function(){for(var t,e=N(s);!(t=e()).done;){var n=t.value;n in C&&v(x[n],C[n])}return function(){Object.values(x).map(g)}}),[C,x,w]),V((function(){h(w,C)})),Object(r.useImperativeHandle)(m,d(function(t){return c.reduce((function(n,r){return n[r]=function(n){p(t[e.methods[r]],n)},n}),{})}(w))),Object(r.createElement)(f.Provider,{value:w},n?Object(r.createElement)(n,function(t,e){for(var n={},r={},o=0,i=t.length;o<i;)r[t[o]]=1,o+=1;for(var u in e)r.hasOwnProperty(u)||(n[u]=e[u]);return n}([].concat(o,i,s),C),b):b)})),usePublisher:function(t){return Object(r.useCallback)(u(p,Object(r.useContext)(f)[t]),[t])},useEmitterValue:function(t){var e=Object(r.useContext)(f)[t],n=Object(r.useState)(a(b,e)),o=n[0],i=n[1];return V((function(){return v(e,(function(t){t!==o&&i(d(t))}))}),[e,o]),o},useEmitter:function(t,e){var n=Object(r.useContext)(f)[t];V((function(){return v(n,e)}),[e,n])}}}var U=n(1618);function K(){return(K=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function q(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)e.indexOf(n=i[r])>=0||(o[n]=t[n]);return o}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Z(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function J(t,e){return!(!t||t[0]!==e[0]||t[1]!==e[1])}function $(t,e){return!(!t||t.startIndex!==e.startIndex||t.endIndex!==e.endIndex)}n.d(e,"a",(function(){return an}));var Q,X,tt,et=_((function(){var t=w(),e=x(0),n=w(),r=x(0),o=w(),i=x(0),u=x(0),a=w(),c=w(),l=x(!1);I(t,r);var s=x("down");return I(O(t,H((function(t,e){return{direction:e<t.prevScrollTop?"up":"down",prevScrollTop:e}}),{direction:"down",prevScrollTop:0}),z((function(t){return t.direction}))),s),{scrollTop:t,viewportHeight:o,headerHeight:i,footerHeight:u,smoothScrollTargetReached:n,scrollTo:a,scrollBy:c,scrollDirection:s,statefulScrollTop:r,deviation:e,scrollingInProgress:l}}),[],{singleton:!0}),nt=_((function(){var t=x(!1);return{propsReady:t,didMount:S(O(t,R((function(t){return t})),k()))}}),[],{singleton:!0}),rt={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,totalHeight:0}},ot=_((function(t){var e=t[0],n=e.scrollTop,r=e.viewportHeight,o=x(!1),i=x(!0),u=w(),a=w(),c=w(),l=S(O(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t,n){switch(t){case 1:return h.apply(void 0,e.map((function(t){return v(t,n)})));case 2:return;default:throw new Error("unrecognized action "+t)}}}(O(A(n),B(1),j(!0)),O(A(n),B(1),j(!1),function(t){var e,n;return function(r){return function(o){e=o,n&&clearTimeout(n),n=setTimeout((function(){r(e)}),t)}}}(100))),k()));I(O(A(n),z((function(t){return 0===t})),k()),i),I(i,a);var s=S(O(P(c,A(n),A(r)),H((function(t,e){var n=e[0],r=n.bottom,o=n.offsetBottom,i=e[1],u=e[2],a={viewportHeight:u,scrollTop:i,offsetBottom:o,totalHeight:r+o};return 0===o&&i+u-r>-4?{atBottom:!0,state:a}:{atBottom:!1,notAtBottomBecause:a.totalHeight>t.state.totalHeight?"SIZE_INCREASED":0!==o?"NOT_SHOWING_LAST_ITEM":u<t.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":i<t.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:a}}),rt),k((function(t,e){return t&&t.atBottom===e.atBottom}))));return I(O(s,z((function(t){return t.atBottom}))),o),v(o,(function(t){setTimeout((function(){return p(u,t)}))})),{isScrolling:l,isAtTop:i,isAtBottom:o,atBottomState:s,atTopStateChange:a,atBottomStateChange:u,listStateListener:c}}),s(et)),it=_((function(t){var e=t[0].scrollTop,n=t[1].isScrolling,r=x(0),o=x(!1),i=w(),u=x(!1);return I(O(n,R((function(t){return!t})),j(0)),r),I(O(e,L(100),M(n),R((function(t){return!!t[1]})),H((function(t,e){return[t[1],e[0]]}),[0,0]),z((function(t){return t[1]-t[0]}))),r),I(O(r,M(u,o,i),R((function(t){return!!t[1]})),z((function(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=n.enter;if(r){if((0,n.exit)(e,o))return!1}else if(i(e,o))return!0;return r})),k()),o),v(O(P(o,r,i),M(u)),(function(t){var e=t[0],n=t[1];return e[0]&&n&&n.change&&n.change(e[1],e[2])})),{isSeeking:o,scrollSeekConfiguration:u,scrollVelocity:r,scrollSeekRangeChanged:i}}),s(et,ot),{singleton:!0}),ut={lvl:0};function at(t,e,n,r,o){return void 0===r&&(r=ut),void 0===o&&(o=ut),{k:t,v:e,lvl:n,l:r,r:o}}function ct(t){return t===ut}function lt(){return ut}function st(t,e){if(ct(t))return ut;var n=t.k,r=t.l,o=t.r;if(e===n){if(ct(r))return o;if(ct(o))return r;var i=function t(e){return ct(e.r)?[e.k,e.v]:t(e.r)}(r);return pt(mt(t,{k:i[0],v:i[1],l:ht(r)}))}return pt(mt(t,e<n?{l:st(r,e)}:{r:st(o,e)}))}function ft(t,e,n){if(void 0===n&&(n="k"),ct(t))return[-1/0,void 0];if(t[n]===e)return[t.k,t.v];if(t[n]<e){var r=ft(t.r,e,n);return-1/0===r[0]?[t.k,t.v]:r}return ft(t.l,e,n)}function dt(t,e,n){return ct(t)?at(e,n,1):e===t.k?mt(t,{k:e,v:n}):function(t){return It(Ct(t))}(mt(t,e<t.k?{l:dt(t.l,e,n)}:{r:dt(t.r,e,n)}))}function ht(t){return ct(t.r)?t.l:pt(mt(t,{r:ht(t.r)}))}function mt(t,e){return at(void 0!==e.k?e.k:t.k,void 0!==e.v?e.v:t.v,void 0!==e.lvl?e.lvl:t.lvl,void 0!==e.l?e.l:t.l,void 0!==e.r?e.r:t.r)}function vt(t){return ct(t)||t.lvl>t.r.lvl}function pt(t){var e=t.l,n=t.r,r=t.lvl;if(n.lvl>=r-1&&e.lvl>=r-1)return t;if(r>n.lvl+1){if(vt(e))return Ct(mt(t,{lvl:r-1}));if(ct(e)||ct(e.r))throw new Error("Unexpected empty nodes");return mt(e.r,{l:mt(e,{r:e.r.l}),r:mt(t,{l:e.r.r,lvl:r-1}),lvl:r})}if(vt(t))return It(mt(t,{lvl:r-1}));if(ct(n)||ct(n.l))throw new Error("Unexpected empty nodes");var o=n.l,i=vt(o)?n.lvl-1:n.lvl;return mt(o,{l:mt(t,{r:o.l,lvl:r-1}),r:It(mt(n,{l:o.r,lvl:i})),lvl:o.lvl+1})}function gt(t,e,n){return ct(t)?[]:bt(function t(e,n,r){if(ct(e))return[];var o=e.k,i=e.v,u=e.r,a=[];return o>n&&(a=a.concat(t(e.l,n,r))),o>=n&&o<=r&&a.push({k:o,v:i}),o<=r&&(a=a.concat(t(u,n,r))),a}(t,ft(t,e)[0],n),(function(t){return{index:t.k,value:t.v}}))}function bt(t,e){var n=t.length;if(0===n)return[];for(var r=e(t[0]),o=r.index,i=r.value,u=[],a=1;a<n;a++){var c=e(t[a]),l=c.index,s=c.value;u.push({start:o,end:l-1,value:i}),o=l,i=s}return u.push({start:o,end:1/0,value:i}),u}function It(t){var e=t.r,n=t.lvl;return ct(e)||ct(e.r)||e.lvl!==n||e.r.lvl!==n?t:mt(e,{l:mt(t,{r:e.l}),lvl:n+1})}function Ct(t){var e=t.l;return ct(e)||e.lvl!==t.lvl?t:mt(e,{r:mt(t,{l:e.r})})}function wt(t,e,n,r){void 0===r&&(r=0);for(var o=t.length-1;r<=o;){var i=Math.floor((r+o)/2),u=n(t[i],e);if(0===u)return i;if(-1===u){if(o-r<2)return i-1;o=i-1}else{if(o===r)return i;r=i+1}}throw new Error("Failed binary finding record in array - "+t.join(",")+", searched for "+e)}function xt(t,e,n){return t[wt(t,e,n)]}function St(t,e){return t.getBoundingClientRect()[e]}(tt=X||(X={}))[tt.DEBUG=0]="DEBUG",tt[tt.INFO=1]="INFO",tt[tt.WARN=2]="WARN",tt[tt.ERROR=3]="ERROR";var Tt=((Q={})[X.DEBUG]="debug",Q[X.INFO]="log",Q[X.WARN]="warn",Q[X.ERROR]="error",Q),yt=_((function(){var t=x(X.ERROR);return{log:x((function(e,n,r){var o;void 0===r&&(r=X.INFO),r>=(null!=(o=globalThis.VIRTUOSO_LOG_LEVEL)?o:b(t))&&console[Tt[r]]("%creact-virutoso: %c%s %o","color: #0253b3; font-weight: bold","color: black",e,n)})),logLevel:t}}),[],{singleton:!0});function Ot(t){var e=t.size,n=t.startIndex,r=t.endIndex;return function(t){return t.start===n&&(t.end===r||1/0===t.end)&&t.value===e}}function Et(t,e){var n=t.index;return e===n?0:e<n?-1:1}function kt(t,e){var n=t.offset;return e===n?0:e<n?-1:1}function Rt(t){return{index:t.index,value:t}}function zt(t,e){var n=e[0],r=e[1];n.length>0&&(0,e[2])("received item sizes",n,X.DEBUG);var o=t.sizeTree,i=t.offsetTree,u=o,a=0;if(r.length>0&&ct(o)&&2===n.length){var c=n[0].size,l=n[1].size;u=r.reduce((function(t,e){return dt(dt(t,e,c),e+1,l)}),u)}else{var s=function(t,e){for(var n,r=ct(t)?0:1/0,o=Z(e);!(n=o()).done;){var i=n.value,u=i.size,a=i.startIndex,c=i.endIndex;if(r=Math.min(r,a),ct(t))t=dt(t,0,u);else{var l=gt(t,a-1,c+1);if(!l.some(Ot(i))){for(var s,f=!1,d=!1,h=Z(l);!(s=h()).done;){var m=s.value,v=m.start,p=m.end,g=m.value;f?(c>=v||u===g)&&(t=st(t,v)):(d=g!==u,f=!0),p>c&&c>=v&&g!==u&&(t=dt(t,c+1,g))}d&&(t=dt(t,a,u))}}}return[t,r]}(u,n);u=s[0],a=s[1]}if(u===o)return t;var f=0,d=0,h=0,m=0;if(0!==a){m=wt(i,a-1,Et),h=i[m].offset;var v=ft(u,a-1);f=v[0],d=v[1],i.length&&i[m].size===ft(u,a)[1]&&(m-=1),i=i.slice(0,m+1)}else i=[];for(var p,g=Z(gt(u,a,1/0));!(p=g()).done;){var b=p.value,I=b.start,C=b.value,w=(I-f)*d+h;i.push({offset:w,size:C,index:I}),f=I,h=w,d=C}return{sizeTree:u,offsetTree:i,groupOffsetTree:r.reduce((function(t,e){return dt(t,e,jt(e,i))}),lt()),lastIndex:f,lastOffset:h,lastSize:d,groupIndices:r}}function jt(t,e){if(0===e.length)return 0;var n=xt(e,t,Et);return n.size*(t-n.index)+n.offset}function Ht(t,e){if(!Bt(e))return t;for(var n=0;e.groupIndices[n]<=t+n;)n++;return t+n}function Bt(t){return!ct(t.groupOffsetTree)}var Lt={offsetHeight:"height",offsetWidth:"width"},Mt=_((function(t){var e=t[0].log,n=w(),r=w(),o=w(),i=x(0),u=x([]),a=x(void 0),c=x(void 0),l=x((function(t,e){return St(t,Lt[e])})),s=x(void 0),f={offsetTree:[],sizeTree:lt(),groupOffsetTree:lt(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},d=T(O(n,M(u,e),H(zt,f),k()),f);I(O(u,R((function(t){return t.length>0})),M(d),z((function(t){var e=t[0],n=t[1],r=e.reduce((function(t,e,r){return dt(t,e,jt(e,n.offsetTree)||r)}),lt());return K({},n,{groupIndices:e,groupOffsetTree:r})}))),d),I(O(r,M(d),R((function(t){return t[0]<t[1].lastIndex})),z((function(t){var e=t[1];return[{startIndex:t[0],endIndex:e.lastIndex,size:e.lastSize}]}))),n),I(a,c);var h=T(O(a,z((function(t){return void 0===t}))),!0);I(O(c,R((function(t){return void 0!==t&&ct(b(d).sizeTree)})),z((function(t){return[{startIndex:0,endIndex:0,size:t}]}))),n);var m=S(O(n,M(d),H((function(t,e){var n=e[1];return{changed:n!==t.sizes,sizes:n}}),{changed:!1,sizes:f}),z((function(t){return t.changed}))));I(O(i,H((function(t,e){return{diff:t.prev-e,prev:e}}),{diff:0,prev:0}),z((function(t){return t.diff})),R((function(t){return t>0}))),o),v(O(i,M(e)),(function(t){t[0]<0&&(0,t[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:i},X.ERROR)}));var p=S(o);return I(O(o,M(d),z((function(t){var e=t[0],n=t[1];if(n.groupIndices.length>0)throw new Error("Virtuoso: prepending items does not work with groups");return function t(e){return ct(e)?[]:[].concat(t(e.l),[{k:e.k,v:e.v}],t(e.r))}(n.sizeTree).reduce((function(t,n){var r=n.k,o=n.v;return{ranges:[].concat(t.ranges,[{startIndex:t.prevIndex,endIndex:r+e-1,size:t.prevSize}]),prevIndex:r+e,prevSize:o}}),{ranges:[],prevIndex:0,prevSize:n.lastSize}).ranges}))),n),{data:s,totalCount:r,sizeRanges:n,groupIndices:u,defaultItemSize:c,fixedItemSize:a,unshiftWith:o,beforeUnshiftWith:p,firstItemIndex:i,sizes:d,listRefresh:m,trackItemSizes:h,itemSize:l}}),s(yt),{singleton:!0}),At="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style;function Pt(t){var e="number"==typeof t?{index:t}:t;return e.align||(e.align="start"),e.behavior&&At||(e.behavior="auto"),e.offset||(e.offset=0),e}var _t=_((function(t){var e=t[0],n=e.sizes,r=e.totalCount,o=e.listRefresh,i=t[1],u=i.scrollingInProgress,a=i.viewportHeight,c=i.scrollTo,l=i.smoothScrollTargetReached,s=i.headerHeight,f=i.footerHeight,d=w(),h=x(0),m=null,g=null,b=null,S=function(){m&&(m(),m=null),b&&(b(),b=null),g&&(clearTimeout(g),g=null),p(u,!1)};return I(O(d,M(n,a,r,h,s,f),z((function(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],c=t[5],s=t[6],f=Pt(e),h=f.align,I=f.behavior,w=f.offset,x=i-1,T=f.index;T=Ht(T,n);var y=jt(T=Math.max(0,T,Math.min(x,T)),n.offsetTree)+c;"end"===h?(y=Math.round(y-r+ft(n.sizeTree,T)[1]),T===x&&(y+=s)):"center"===h?y=Math.round(y-r/2+ft(n.sizeTree,T)[1]/2):y-=a,w&&(y+=w);var E,k,R=function(t){S(),t&&p(d,e)};if(S(),"smooth"===I){var z=!1;b=v(o,(function(t){z=z||t})),m=C(l,(function(){R(z)}))}else m=C(O(o,(function(t){return function(e){E=E||e,k||(k=setTimeout((function(){k=void 0,t(E)}),0))}})),R);return g=setTimeout((function(){S()}),1200),p(u,!0),{top:y,behavior:I}}))),c),{scrollToIndex:d,topListHeight:h}}),s(Mt,et),{singleton:!0}),Ft=function(t,e,n){return"number"==typeof t?"up"===n&&"top"===e||"down"===n&&"bottom"===e?t:0:"up"===n?"top"===e?t.main:t.reverse:"bottom"===e?t.main:t.reverse},Wt=_((function(t){var e=t[0],n=e.scrollTop,r=e.viewportHeight,o=e.deviation,i=e.headerHeight,u=w(),a=x(0),c=x(0);return{listBoundary:u,overscan:c,topListHeight:a,visibleRange:T(O(P(A(n),A(r),A(i),A(u,J),A(c),A(a),A(o)),z((function(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=o[0],u=o[1],a=t[4],c=t[5],l=t[6],s=e-l,f=Math.max(r-s,0),d="none";return i-=l,u+=r,(i+=r)>e+c&&(d="up"),(u-=l)<e-f+n&&(d="down"),"none"!==d?[Math.max(s-r-Ft(a,"top",d),0),s-f+n+Ft(a,"bottom",d)]:null})),R((function(t){return null!=t})),k(J)),[0,0])}}),s(et),{singleton:!0}),Nt=_((function(t){var e=t[0],n=e.scrollTop,r=e.scrollTo,o=w(),i=w(),u=w(),a=x(!1);return I(O(P(i,o),z((function(t){return Math.max(0,t[0]-t[1].offsetTop)}))),n),I(O(r,M(o),z((function(t){var e=t[0];return K({},e,{top:e.top+t[1].offsetTop})}))),u),{useWindowScroll:a,windowScrollTop:i,windowViewportRect:o,windowScrollTo:u}}),s(et)),Gt={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Vt={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Dt=Math.ceil,Ut=Math.floor,Kt=Math.min,qt=Math.max;function Yt(t){return Dt(t)-t<.03?Dt(t):Ut(t)}function Zt(t,e){return Array.from({length:e-t+1}).map((function(e,n){return{index:n+t}}))}var Jt=_((function(t){var e=t[0],n=e.overscan,r=e.visibleRange,o=e.listBoundary,i=t[1],u=i.scrollTop,a=i.viewportHeight,c=i.scrollBy,l=i.scrollTo,s=i.smoothScrollTargetReached,f=t[2],d=t[3],h=t[4],m=h.propsReady,v=h.didMount,p=t[5],g=p.windowViewportRect,b=p.windowScrollTo,C=p.useWindowScroll,y=p.windowScrollTop,E=x(0),H=x(0),B=x(Gt),L=x({height:0,width:0}),_=x({height:0,width:0}),F=w();I(O(v,M(H),R((function(t){return 0!==t[1]})),z((function(t){return{items:Zt(0,t[1]-1),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}}))),B),I(O(P(A(E),r,A(_,(function(t,e){return t&&t.width===e.width&&t.height===e.height}))),M(L),z((function(t){var e=t[0],n=e[0],r=e[1],o=r[0],i=r[1],u=e[2],a=t[1],c=u.height,l=u.width,s=a.width;if(0===n||0===s)return Gt;if(0===l)return Vt;var f=Yt(s/l),d=f*Ut(o/c),h=f*Dt(i/c)-1;h=Kt(n-1,h);var m=Zt(d=Kt(h,qt(0,d)),h),v=$t(a,u,m),p=v.top,g=v.bottom;return{items:m,offsetTop:p,offsetBottom:Dt(n/f)*c-g,top:p,bottom:g,itemHeight:c,itemWidth:l}}))),B),I(O(L,z((function(t){return t.height}))),a),I(O(P(L,_,B),z((function(t){var e=$t(t[0],t[1],t[2].items);return[e.top,e.bottom]})),k(J)),o),I(O(o,M(B),z((function(t){return{bottom:t[0][1],offsetBottom:t[1].offsetBottom}}))),f.listStateListener);var W=S(O(A(B),R((function(t){return t.items.length>0})),M(E),R((function(t){var e=t[0].items;return e[e.length-1].index===t[1]-1})),z((function(t){return t[1]-1})),k())),N=S(O(A(B),R((function(t){var e=t.items;return e.length>0&&0===e[0].index})),j(0),k())),G=S(O(A(B),R((function(t){return t.items.length>0})),z((function(t){var e=t.items;return{startIndex:e[0].index,endIndex:e[e.length-1].index}})),k($)));I(G,d.scrollSeekRangeChanged),I(O(F,M(L,_,E),z((function(t){var e=t[1],n=t[2],r=t[3],o=Pt(t[0]),i=o.align,u=o.behavior,a=o.offset,c=o.index,l=Qt(e,n,c=Math.max(0,c,Math.min(r-1,c)));return"end"===i?l=Math.round(l-e.height+n.height):"center"===i&&(l=Math.round(l-e.height/2+n.height/2)),a&&(l+=a),{top:l,behavior:u}}))),l);var V=T(O(B,z((function(t){return t.offsetBottom+t.bottom}))),0);return I(O(g,z((function(t){return{width:t.visibleWidth,height:t.visibleHeight}}))),L),K({totalCount:E,viewportDimensions:L,itemDimensions:_,scrollTop:u,overscan:n,scrollBy:c,scrollTo:l,scrollToIndex:F,smoothScrollTargetReached:s,windowViewportRect:g,windowScrollTo:b,useWindowScroll:C,windowScrollTop:y,initialItemCount:H},d,{gridState:B,totalListHeight:V},f,{startReached:N,endReached:W,rangeChanged:G,propsReady:m})}),s(Wt,et,ot,it,nt,Nt));function $t(t,e,n){var r=e.height;return void 0===r||0===n.length?{top:0,bottom:0}:{top:Qt(t,e,n[0].index),bottom:Qt(t,e,n[n.length-1].index)+r}}function Qt(t,e,n){var r=Yt(t.width/e.width);return Ut(n/r)*e.height}function Xt(t,e){void 0===e&&(e=!0);var n=Object(r.useRef)(null),o=new U.a((function(e){var n=e[0].target;null!==n.offsetParent&&t(n)}));return{ref:n,callbackRef:function(t){t&&e?(o.observe(t),n.current=t):(n.current&&o.unobserve(n.current),n.current=null)}}}function te(t,e){return void 0===e&&(e=!0),Xt(t,e).callbackRef}function ee(t){var e=Object(r.useRef)(null),n=Object(r.useCallback)((function(n){if(null!==n){var r=n.getBoundingClientRect(),o=window.innerHeight-Math.max(0,r.top),i=r.top+window.pageYOffset;e.current={offsetTop:i,visibleHeight:o,visibleWidth:r.width},t(e.current)}}),[t]),o=Xt(n),i=o.callbackRef,u=o.ref,a=Object(r.useCallback)((function(){n(u.current)}),[n,u]);return Object(r.useEffect)((function(){return window.addEventListener("scroll",a),window.addEventListener("resize",a),function(){window.removeEventListener("scroll",a),window.removeEventListener("resize",a)}}),[a]),i}var ne="undefined"!=typeof document?r.useLayoutEffect:r.useEffect;function re(t,e,n,o){void 0===o&&(o=m);var i=Object(r.useRef)(null),u=Object(r.useRef)(null),a=Object(r.useRef)(null),c=Object(r.useCallback)((function(n){var r=n.target,o=r===window||r===document?window.pageYOffset||document.documentElement.scrollTop:r.scrollTop;t(Math.max(o,0)),null!==u.current&&(o===u.current||o<=0||o===r.scrollHeight-St(r,"height"))&&(u.current=null,e(!0),a.current&&(clearTimeout(a.current),a.current=null))}),[t,e]);return Object(r.useEffect)((function(){var t=i.current;return o(i.current),c({target:t}),t.addEventListener("scroll",c,{passive:!0}),function(){o(null),t.removeEventListener("scroll",c)}}),[i,c,n,o]),{scrollerRef:i,scrollByCallback:function(t){null===u.current&&i.current.scrollBy(t)},scrollToCallback:function(n){var r=i.current;if(r){var o,c,l,s="smooth"===n.behavior;if(r===window?(c=Math.max(St(document.documentElement,"height"),document.documentElement.scrollHeight),o=window.innerHeight,l=document.documentElement.scrollTop):(c=r.scrollHeight,o=St(r,"height"),l=r.scrollTop),o===c||n.top===l)return t(l),void(s&&e(!0));n.top=Math.max(Math.min(c-o,n.top),0),s?(u.current=n.top,a.current&&clearTimeout(a.current),a.current=setTimeout((function(){a.current=null,u.current=null,e(!0)}),1e3)):u.current=null,r.scrollTo(n)}}}}var oe=_((function(t){var e=t[0],n=e.sizes,r=e.listRefresh,o=e.defaultItemSize,i=t[1].scrollTop,u=t[2].scrollToIndex,a=t[3].didMount,c=x(!0),l=x(0);return I(O(a,M(l),R((function(t){return 0!==t[1]})),j(!1)),c),v(O(P(r,a),M(c,n,o),R((function(t){var e=t[1],n=t[3];return t[0][1]&&(!ct(t[2].sizeTree)||void 0!==n)&&!e})),M(l)),(function(t){var e=t[1];C(i,(function(){p(c,!0)})),setTimeout((function(){p(u,e)}))})),{scrolledToInitialItem:c,initialTopMostItemIndex:l}}),s(Mt,et,_t,nt),{singleton:!0});function ie(t){return!!t&&("smooth"===t?"smooth":"auto")}var ue=_((function(t){var e=t[0],n=e.totalCount,r=e.listRefresh,o=t[1],i=o.isAtBottom,u=o.atBottomState,a=t[2].scrollToIndex,c=t[3].scrolledToInitialItem,l=t[4],s=l.propsReady,f=l.didMount,d=x(!1),h=null;function m(t,e){p(a,{index:t-1,align:"end",behavior:e})}return v(O(P(O(A(n),B(1)),f),M(A(d),i,c),z((function(t){var e=t[0],n=e[0],r=e[1]&&t[3],o="auto";return r&&(o=function(t,e){return"function"==typeof t?ie(t(e)):e&&ie(t)}(t[1],t[2]),r=r&&!!o),{totalCount:n,shouldFollow:r,followOutputBehavior:o}})),R((function(t){return t.shouldFollow}))),(function(t){var e=t.totalCount,n=t.followOutputBehavior;h&&(h(),h=null),h=C(r,(function(){m(e,n),h=null}))})),v(O(P(A(d),n,s),R((function(t){return t[0]&&t[2]})),H((function(t,e){var n=e[1];return{refreshed:t.value===n,value:n}}),{refreshed:!1,value:0}),R((function(t){return t.refreshed})),M(d,n)),(function(t){var e=t[1],n=t[2],r=C(u,(function(t){!e||t.atBottom||"SIZE_INCREASED"!==t.notAtBottomBecause||h||m(n,"auto")}));setTimeout(r,100)})),v(O(P(A(d),u),M(n)),(function(t){var e=t[0],n=e[1];e[0]&&!n.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===n.notAtBottomBecause&&m(t[1],"auto")})),{followOutput:d}}),s(Mt,ot,_t,oe,nt));function ae(t){return t.reduce((function(t,e){return t.groupIndices.push(t.totalCount),t.totalCount+=e+1,t}),{totalCount:0,groupIndices:[]})}var ce=_((function(t){var e=t[0],n=e.totalCount,r=e.groupIndices,o=e.sizes,i=t[1],u=i.scrollTop,a=i.headerHeight,l=w(),s=w(),f=S(O(l,z(ae)));return I(O(f,z(c("totalCount"))),n),I(O(f,z(c("groupIndices"))),r),I(O(P(u,o,a),R((function(t){return Bt(t[1])})),z((function(t){return ft(t[1].groupOffsetTree,Math.max(t[0]-t[2],0),"v")[0]})),k(),z((function(t){return[t]}))),s),{groupCounts:l,topItemsIndexes:s}}),s(Mt,et)),le={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0};function se(t,e,n){if(0===t.length)return[];if(!Bt(e))return t.map((function(t){return K({},t,{index:t.index+n,originalIndex:t.index})}));for(var r,o=[],i=gt(e.groupOffsetTree,t[0].index,t[t.length-1].index),u=void 0,a=0,c=Z(t);!(r=c()).done;){var l=r.value;(!u||u.end<l.index)&&(u=i.shift(),a=e.groupIndices.indexOf(u.start)),o.push(K({},l.index===u.start?{type:"group",index:a}:{index:l.index-(a+1)+n,groupIndex:a},{size:l.size,offset:l.offset,originalIndex:l.index,data:l.data}))}return o}function fe(t,e,n,r,o){var i=0,u=0;if(t.length>0){i=t[0].offset;var a=t[t.length-1];u=a.offset+a.size}var c=i,l=r.lastOffset+(n-r.lastIndex)*r.lastSize-u;return{items:se(t,r,o),topItems:se(e,r,o),topListHeight:e.reduce((function(t,e){return e.size+t}),0),offsetTop:i,offsetBottom:l,top:c,bottom:u,totalCount:n}}var de,he,me,ve=_((function(t){var e=t[0],n=e.sizes,r=e.totalCount,o=e.data,i=e.firstItemIndex,u=t[1],a=t[2],s=a.visibleRange,f=a.listBoundary,d=a.topListHeight,h=t[3],m=h.scrolledToInitialItem,v=h.initialTopMostItemIndex,p=t[4].topListHeight,g=t[5],b=t[6].didMount,C=x([]),y=w();I(u.topItemsIndexes,C);var E=T(O(P(b,A(s),A(r),A(n),A(v),m,A(C),A(i),o),R((function(t){return t[0]})),z((function(t){var e=t[1],n=e[0],r=e[1],o=t[2],i=t[4],u=t[5],a=t[6],c=t[7],s=t[8],f=t[3],d=f.sizeTree,h=f.offsetTree;if(0===o||0===n&&0===r)return le;if(ct(d))return fe(function(t,e,n){if(Bt(e)){var r=Ht(t,e);return[{index:ft(e.groupOffsetTree,r)[0],size:0,offset:0},{index:r,size:0,offset:0,data:n&&n[0]}]}return[{index:t,size:0,offset:0,data:n&&n[0]}]}(i,f,s),[],o,f,c);var m=[];if(a.length>0)for(var v,p=a[0],g=a[a.length-1],b=0,I=Z(gt(d,p,g));!(v=I()).done;)for(var C=v.value,w=C.value,x=Math.max(C.start,p),S=Math.min(C.end,g),T=x;T<=S;T++)m.push({index:T,size:w,offset:b,data:s&&s[T]}),b+=w;if(!u)return fe([],m,o,f,c);var y=a.length>0?a[a.length-1]+1:0,O=function(t,e,n,r){return void 0===r&&(r=0),r>0&&(e=Math.max(e,xt(t,r,Et).offset)),bt((i=n,a=wt(o=t,e,u=kt),c=wt(o,i,u,a),o.slice(a,c+1)),Rt);var o,i,u,a,c}(h,n,r,y);if(0===O.length)return null;var E=o-1;return fe(l([],(function(t){for(var e,o=Z(O);!(e=o()).done;){var i=e.value,u=i.value,a=u.offset,c=i.start,l=u.size;u.offset<n&&(a+=((c+=Math.floor((n-u.offset)/l))-i.start)*l),c<y&&(a+=(y-c)*l,c=y);for(var f=Math.min(i.end,E),d=c;d<=f&&!(a>=r);d++)t.push({index:d,size:l,offset:a,data:s&&s[d]}),a+=l}})),m,o,f,c)})),R((function(t){return null!==t})),k()),le);return I(O(o,R((function(t){return void 0!==t})),z((function(t){return t.length}))),r),I(O(E,z(c("topListHeight"))),p),I(p,d),I(E,g.listStateListener),I(O(E,z((function(t){return[t.top,t.bottom]}))),f),I(O(E,z((function(t){return t.items}))),y),K({listState:E,topItemsIndexes:C,endReached:S(O(E,R((function(t){return t.items.length>0})),M(r,o),R((function(t){var e=t[0].items;return e[e.length-1].originalIndex===t[1]-1})),z((function(t){return[t[1]-1,t[2]]})),k(J),z((function(t){return t[0]})))),startReached:S(O(E,L(200),R((function(t){var e=t.items;return e.length>0&&e[0].originalIndex===t.topItems.length})),z((function(t){return t.items[0].index})),k())),rangeChanged:S(O(E,R((function(t){return t.items.length>0})),z((function(t){var e=t.items;return{startIndex:e[0].index,endIndex:e[e.length-1].index}})),k($))),itemsRendered:y},g)}),s(Mt,ce,Wt,oe,_t,ot,nt),{singleton:!0}),pe=_((function(t){var e=t[0],n=e.sizes,r=e.firstItemIndex,o=e.data,i=t[1].listState,u=t[2].didMount,a=x(0);return I(O(u,M(a),R((function(t){return 0!==t[1]})),M(n,r,o),z((function(t){var e=t[0][1],n=t[1],r=t[2],o=t[3],i=void 0===o?[]:o,u=0;if(n.groupIndices.length>0)for(var a,c=Z(n.groupIndices);!((a=c()).done||a.value-u>=e);)u++;var l=e+u;return fe(Array.from({length:l}).map((function(t,e){return{index:e,size:0,offset:0,data:i[e]}})),[],l,n,r)}))),i),{initialItemCount:a}}),s(Mt,ve,nt),{singleton:!0}),ge=_((function(t){var e=t[0].topItemsIndexes,n=x(0);return I(O(n,R((function(t){return t>0})),z((function(t){return Array.from({length:t}).map((function(t,e){return e}))}))),e),{topItemCount:n}}),s(ve)),be=_((function(t){var e=t[0],n=e.footerHeight,r=e.headerHeight,o=t[1].listState,i=w(),u=T(O(P(n,r,o),z((function(t){var e=t[2];return t[0]+t[1]+e.offsetBottom+e.bottom}))),0);return I(A(u),i),{totalListHeight:u,totalListHeightChanged:i}}),s(et,ve),{singleton:!0}),Ie=_((function(t){var e=t[0],n=e.scrollBy,r=e.scrollTop,o=e.scrollDirection,i=e.deviation,u=e.scrollingInProgress,a=t[1].isScrolling,c=t[3],l=c.beforeUnshiftWith,s=c.sizes,f=S(O(t[2].listState,H((function(t,e){var n=t[1],r=e.items,o=0;if(n.length>0&&r.length>0){var i=r[0].originalIndex,u=n[0].originalIndex;if(0!==i||0!==u)if(i===u)o=r[0].size-n[0].size;else for(var a=function(t){var e=r[t],i=n.find((function(t){return t.originalIndex===e.originalIndex}));return i?e.offset!==i.offset?(o=e.offset-i.offset,"break"):void 0:"continue"},c=r.length-1;c>=0;c--){var l=a(c);if("continue"!==l&&"break"===l)break}}return[o,r]}),[0,[]]),R((function(t){return 0!==t[0]})),M(r,o,u),R((function(t){return!t[3]&&0!==t[1]&&"up"===t[2]})),z((function(t){return t[0][0]}))));return I(O(f,M(i),z((function(t){return t[1]-t[0]}))),i),v(O(P(T(a,!1),i),R((function(t){return!t[0]&&0!==t[1]})),z((function(t){return t[1]})),L(1)),(function(t){t>0?(p(n,{top:-t,behavior:"auto"}),p(i,0)):(p(i,0),p(n,{top:-t,behavior:"auto"}))})),I(O(l,M(s),z((function(t){return t[0]*t[1].lastSize}))),f),{deviation:i}}),s(et,ot,ve,Mt)),Ce=_((function(t){var e=t[0].totalListHeight,n=t[1].didMount,r=t[2].scrollTo,o=x(0);return v(O(n,M(o),R((function(t){return 0!==t[1]})),z((function(t){return{top:t[1]}}))),(function(t){C(O(e,R((function(t){return 0!==t}))),(function(){setTimeout((function(){p(r,t)}))}))})),{initialScrollTop:o}}),s(be,nt,et),{singleton:!0}),we=_((function(t){var e=t[0].viewportHeight,n=t[1].totalListHeight,r=x(!1);return{alignToBottom:r,paddingTopAddition:T(O(P(r,e,n),R((function(t){return t[0]})),z((function(t){return Math.max(0,t[1]-t[2])})),k()),0)}}),s(et,be),{singleton:!0}),xe=_((function(t){return K({},t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7])}),s(Wt,pe,nt,it,be,Ce,we,Nt)),Se=_((function(t){var e=t[0],n=e.totalCount,r=e.sizeRanges,o=e.fixedItemSize,i=e.defaultItemSize,u=e.trackItemSizes,a=e.itemSize,l=e.data,s=e.firstItemIndex,f=e.groupIndices,d=t[1],h=d.initialTopMostItemIndex,m=d.scrolledToInitialItem,v=t[2],p=t[3],g=t[4],b=g.listState,C=g.topItemsIndexes,w=q(g,["listState","topItemsIndexes"]),x=t[5].scrollToIndex,S=t[7].topItemCount,T=t[8].groupCounts,y=t[9],E=t[10];return I(w.rangeChanged,y.scrollSeekRangeChanged),I(O(y.windowViewportRect,z(c("visibleHeight"))),v.viewportHeight),K({totalCount:n,data:l,firstItemIndex:s,sizeRanges:r,initialTopMostItemIndex:h,scrolledToInitialItem:m,topItemsIndexes:C,topItemCount:S,groupCounts:T,fixedItemHeight:o,defaultItemHeight:i},p,{listState:b,scrollToIndex:x,trackItemSizes:u,itemSize:a,groupIndices:f},w,y,v,E)}),s(Mt,oe,et,ue,ve,_t,Ie,ge,ce,xe,yt)),Te=(de=function(){if("undefined"==typeof document)return"sticky";var t=document.createElement("div");return t.style.position="-webkit-sticky","-webkit-sticky"===t.style.position?"-webkit-sticky":"sticky"},me=!1,function(){return me||(me=!0,he=de()),he});function ye(t){return t}var Oe=_((function(){var t=x((function(t){return"Item "+t})),e=x((function(t){return"Group "+t})),n=x({}),r=x(ye),o=x("div"),i=x(m),u=function(t,e){return void 0===e&&(e=null),T(O(n,z((function(e){return e[t]})),k()),e)};return{itemContent:t,groupContent:e,components:n,computeItemKey:r,headerFooterTag:o,scrollerRef:i,FooterComponent:u("Footer"),HeaderComponent:u("Header"),TopItemListComponent:u("TopItemList"),ListComponent:u("List","div"),ItemComponent:u("Item","div"),GroupComponent:u("Group","div"),ScrollerComponent:u("Scroller","div"),EmptyPlaceholder:u("EmptyPlaceholder"),ScrollSeekPlaceholder:u("ScrollSeekPlaceholder")}}));function Ee(t,e){var n=w();return v(n,(function(){return console.warn("react-virtuoso: You are using a deprecated property. "+e,"color: red;","color: inherit;","color: blue;")})),I(n,t),n}var ke=_((function(t){var e=t[0],n=t[1],r={item:Ee(n.itemContent,"Rename the %citem%c prop to %citemContent."),group:Ee(n.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Ee(e.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Ee(e.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Ee(e.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:w(),maxHeightCacheSize:w(),footer:w(),header:w(),HeaderContainer:w(),FooterContainer:w(),ItemContainer:w(),ScrollContainer:w(),GroupContainer:w(),ListContainer:w(),emptyComponent:w(),scrollSeek:w()};function o(t,e,r){I(O(t,M(n.components),z((function(t){var n,o=t[0],i=t[1];return console.warn("react-virtuoso: "+r+" property is deprecated. Pass components."+e+" instead."),K({},i,((n={})[e]=o,n))}))),n.components)}return v(r.adjustForPrependedItems,(function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")})),v(r.maxHeightCacheSize,(function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")})),v(r.HeaderContainer,(function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")})),v(r.FooterContainer,(function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")})),v(r.scrollSeek,(function(t){var r=t.placeholder,o=q(t,["placeholder"]);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),p(n.components,K({},b(n.components),{ScrollSeekPlaceholder:r})),p(e.scrollSeekConfiguration,o)})),o(r.footer,"Footer","footer"),o(r.header,"Header","header"),o(r.ItemContainer,"Item","ItemContainer"),o(r.ListContainer,"List","ListContainer"),o(r.ScrollContainer,"Scroller","ScrollContainer"),o(r.emptyComponent,"EmptyPlaceholder","emptyComponent"),o(r.GroupContainer,"Group","GroupContainer"),K({},e,n,r)}),s(Se,Oe)),Re=function(t){return Object(r.createElement)("div",{style:{height:t.height}})},ze={position:Te(),zIndex:1},je=Object(r.memo)((function(t){var e,n,o,i,u=t.showTopList,a=void 0!==u&&u,c=Ue("listState"),l=Ue("deviation"),s=De("sizeRanges"),f=Ue("itemContent"),d=Ue("groupContent"),h=Ue("trackItemSizes"),m=(e=s,n=Ue("itemSize"),o=h,i=Ue("log"),te((function(t){var r=function(t,e,n,r){var o=t.length;if(0===o)return null;for(var i=[],u=0;u<o;u++){var a=t.item(u);if(a&&void 0!==a.dataset.index){var c=parseInt(a.dataset.index),l=parseFloat(a.dataset.knownSize),s=e(a,"offsetHeight");if(0===s&&r("Zero-sized element, this should not happen",{child:a},X.ERROR),s!==l){var f=i[i.length-1];0===i.length||f.size!==s||f.endIndex!==c-1?i.push({startIndex:c,endIndex:c,size:s}):i[i.length-1].endIndex++}}}return i}(t.children,n,0,i);null!==r&&e(r)}),o)),v=Ue("EmptyPlaceholder"),p=Ue("ScrollSeekPlaceholder")||Re,g=Ue("ListComponent"),b=Ue("ItemComponent"),I=Ue("GroupComponent"),C=Ue("computeItemKey"),w=Ue("isSeeking"),x=Ue("groupIndices").length>0,S=Ue("paddingTopAddition"),T=Ue("scrolledToInitialItem"),y=a?{}:{boxSizing:"border-box",paddingTop:c.offsetTop+S,paddingBottom:c.offsetBottom,marginTop:l};return!a&&0===c.items.length&&v&&T?Object(r.createElement)(v):Object(r.createElement)(g,{ref:m,style:y},(a?c.topItems:c.items).map((function(t){var e=t.originalIndex,n=C(e,t.data);return w?Object(r.createElement)(p,{key:n,index:t.index,height:t.size}):"group"===t.type?Object(r.createElement)(I,{key:n,"data-index":e,"data-known-size":t.size,"data-item-index":t.index,style:ze},d(t.index)):Object(r.createElement)(b,{key:n,"data-index":e,"data-known-size":t.size,"data-item-index":t.index,"data-item-group-index":t.groupIndex},x?f(t.index,t.groupIndex,t.data):f(t.index,t.data))})))})),He={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Be={width:"100%",height:"100%",position:"absolute",top:0},Le={width:"100%",position:Te(),top:0},Me=Object(r.memo)((function(){var t=Ue("HeaderComponent"),e=De("headerHeight"),n=Ue("headerFooterTag"),o=te((function(t){return e(St(t,"height"))}));return t?Object(r.createElement)(n,{ref:o},Object(r.createElement)(t)):null})),Ae=Object(r.memo)((function(){var t=Ue("FooterComponent"),e=De("footerHeight"),n=Ue("headerFooterTag"),o=te((function(t){return e(St(t,"height"))}));return t?Object(r.createElement)(n,{ref:o},Object(r.createElement)(t)):null}));function Pe(t){var e=t.usePublisher,n=t.useEmitter,o=t.useEmitterValue;return Object(r.memo)((function(t){var i=t.style,u=t.children,a=q(t,["style","children"]),c=e("scrollTop"),l=o("ScrollerComponent"),s=re(c,e("smoothScrollTargetReached"),l,o("scrollerRef")),f=s.scrollerRef,d=s.scrollByCallback;return n("scrollTo",s.scrollToCallback),n("scrollBy",d),Object(r.createElement)(l,K({ref:f,style:K({},He,i),tabIndex:0},a),u)}))}function _e(t){var e=t.usePublisher,n=t.useEmitter,o=t.useEmitterValue;return Object(r.memo)((function(t){var i=t.style,u=t.children,a=q(t,["style","children"]),c=e("windowScrollTop"),l=o("ScrollerComponent"),s=e("smoothScrollTargetReached"),f=o("totalListHeight"),d=re(c,s,l),h=d.scrollerRef,m=d.scrollByCallback,v=d.scrollToCallback;return ne((function(){return h.current=window,function(){h.current=null}}),[h]),n("windowScrollTo",v),n("scrollBy",m),Object(r.createElement)(l,K({style:K({position:"relative"},i,0!==f?{height:f}:{})},a),u)}))}var Fe=function(t){var e=t.children,n=te(o(De("viewportHeight"),(function(t){return St(t,"height")})));return Object(r.createElement)("div",{style:Be,ref:n},e)},We=function(t){var e=t.children,n=ee(De("windowViewportRect"));return Object(r.createElement)("div",{ref:n,style:Be},e)},Ne=function(t){var e=t.children,n=Ue("TopItemListComponent"),o=Ue("headerHeight"),i=K({},Le,{marginTop:o+"px"});return Object(r.createElement)(n||"div",{style:i},e)},Ge=D(ke,{required:{},optional:{followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",scrollerRef:"scrollerRef",logLevel:"logLevel",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Object(r.memo)((function(t){var e=Ue("useWindowScroll"),n=Ue("topItemsIndexes").length>0,o=e?We:Fe;return Object(r.createElement)(e?Ye:qe,Object.assign({},t),Object(r.createElement)(o,null,Object(r.createElement)(Me,null),Object(r.createElement)(je,null),Object(r.createElement)(Ae,null)),n&&Object(r.createElement)(Ne,null,Object(r.createElement)(je,{showTopList:!0})))}))),Ve=Ge.Component,De=Ge.usePublisher,Ue=Ge.useEmitterValue,Ke=Ge.useEmitter,qe=Pe({usePublisher:De,useEmitterValue:Ue,useEmitter:Ke}),Ye=_e({usePublisher:De,useEmitterValue:Ue,useEmitter:Ke}),Ze=_((function(){var t=x((function(t){return"Item "+t})),e=x({}),n=x("virtuoso-grid-item"),r=x("virtuoso-grid-list"),o=x(ye),i=x(m),u=function(t,n){return void 0===n&&(n=null),T(O(e,z((function(e){return e[t]})),k()),n)};return{itemContent:t,components:e,computeItemKey:o,itemClassName:n,listClassName:r,scrollerRef:i,ListComponent:u("List","div"),ItemComponent:u("Item","div"),ScrollerComponent:u("Scroller","div"),ScrollSeekPlaceholder:u("ScrollSeekPlaceholder","div")}})),Je=_((function(t){var e=t[0],n=t[1],r={item:Ee(n.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:w(),ScrollContainer:w(),ListContainer:w(),emptyComponent:w(),scrollSeek:w()};function o(t,e,r){I(O(t,M(n.components),z((function(t){var n,o=t[0],i=t[1];return console.warn("react-virtuoso: "+r+" property is deprecated. Pass components."+e+" instead."),K({},i,((n={})[e]=o,n))}))),n.components)}return v(r.scrollSeek,(function(t){var r=t.placeholder,o=q(t,["placeholder"]);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),p(n.components,K({},b(n.components),{ScrollSeekPlaceholder:r})),p(e.scrollSeekConfiguration,o)})),o(r.ItemContainer,"Item","ItemContainer"),o(r.ListContainer,"List","ListContainer"),o(r.ScrollContainer,"Scroller","ScrollContainer"),K({},e,n,r)}),s(Jt,Ze)),$e=Object(r.memo)((function(){var t=nn("gridState"),e=nn("listClassName"),n=nn("itemClassName"),o=nn("itemContent"),i=nn("computeItemKey"),u=nn("isSeeking"),a=nn("ItemComponent"),c=nn("ListComponent"),l=nn("ScrollSeekPlaceholder"),s=en("itemDimensions"),f=te((function(t){var e=t.firstChild;e&&s(e.getBoundingClientRect())}));return Object(r.createElement)(c,{ref:f,className:e,style:{paddingTop:t.offsetTop,paddingBottom:t.offsetBottom}},t.items.map((function(e){var c=i(e.index);return u?Object(r.createElement)(l,{key:c,style:{height:t.itemHeight,width:t.itemWidth}}):Object(r.createElement)(a,{className:n,"data-index":e.index,key:c},o(e.index))})))})),Qe=function(t){var e=t.children,n=en("viewportDimensions"),o=te((function(t){n(t.getBoundingClientRect())}));return Object(r.createElement)("div",{style:Be,ref:o},e)},Xe=function(t){var e=t.children,n=ee(en("windowViewportRect"));return Object(r.createElement)("div",{ref:n,style:Be},e)},tn=D(Je,{optional:{totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},Object(r.memo)((function(t){var e=K({},t),n=nn("useWindowScroll"),o=n?Xe:Qe;return Object(r.createElement)(n?un:on,Object.assign({},e),Object(r.createElement)(o,null,Object(r.createElement)($e,null)))}))),en=(tn.Component,tn.usePublisher),nn=tn.useEmitterValue,rn=tn.useEmitter,on=Pe({usePublisher:en,useEmitterValue:nn,useEmitter:rn}),un=_e({usePublisher:en,useEmitterValue:nn,useEmitter:rn}),an=Ve}}]);